<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.journey.dao.SelectLimitInfoDao">

    <resultMap id="BaseResultMap" type="org.journey.entity.SelectLimitInfo">
        <!--@Table select_limit_info-->
        <result property="limitId" column="limit_id" jdbcType="INTEGER"/>
        <result property="columnKey" column="column_key" jdbcType="INTEGER"/>
        <result property="maxValue" column="max_value" jdbcType="INTEGER"/>
        <result property="minValue" column="min_value" jdbcType="INTEGER"/>
    </resultMap>

    <!--查询单个-->
    <select id="queryById" resultMap="BaseResultMap">
        select
limit_id,
column_key,
max_value,
min_value


        from select_limit_info
        <where>
            <if test="limitId != null">
                and limit_id = #{limitId}
            </if>
            <if test="columnKey != null">
                and column_key = #{columnKey}
            </if>
            <if test="maxValue != null">
                and max_value = #{maxValue}
            </if>
            <if test="minValue != null">
                and min_value = #{minValue}
            </if>
        </where>
    </select>

    <!--查询指定行数据-->
    <select id="queryAllByLimit" resultMap="BaseResultMap">
        select
limit_id,
column_key,
max_value,
min_value


        from select_limit_info
        <where>
            <if test="limitId != null">
                and limit_id = #{limitId}
            </if>
            <if test="columnKey != null">
                and column_key = #{columnKey}
            </if>
            <if test="maxValue != null">
                and max_value = #{maxValue}
            </if>
            <if test="minValue != null">
                and min_value = #{minValue}
            </if>
        </where>
        limit #{pageable.offset}, #{pageable.pageSize}
    </select>

    <!--通过实体作为筛选条件查询-->
    <select id="queryAll" resultMap="BaseResultMap">
        select
limit_id,
column_key,
max_value,
min_value


        from tables.select_limit_info
    </select>
    <!--统计总行数-->
    <select id="count" resultType="java.lang.Integer">
        select count(1)
        from select_limit_info
        <where>
            <if test="limitId != null">
                and limit_id = #{limitId}
            </if>
            <if test="columnKey != null">
                and column_key = #{columnKey}
            </if>
            <if test="maxValue != null">
                and max_value = #{maxValue}
            </if>
            <if test="minValue != null">
                and min_value = #{minValue}
            </if>
        </where>
    </select>

    <!--新增所有列-->
    <insert id="insert" keyProperty="limitId" useGeneratedKeys="true">
        insert into select_limit_info(column_key, max_value, min_value)
        values (#{columnKey}, #{maxValue}, #{minValue})
    </insert>

    <insert id="insertBatch" keyProperty="limitId" useGeneratedKeys="true">
        insert into select_limit_info(column_key, max_value, min_value)
        values
        <foreach collection="entities" item="entity" separator=",">
        (#{entity.columnKey}, #{entity.maxValue}, #{entity.minValue})
        </foreach>
    </insert>

    <insert id="insertOrUpdateBatch" keyProperty="limitId" useGeneratedKeys="true">
        insert into select_limit_info(column_key, max_value, min_value)
        values
        <foreach collection="entities" item="entity" separator=",">
            (#{entity.columnKey}, #{entity.maxValue}, #{entity.minValue})
        </foreach>
        on duplicate key update
column_key = values(column_key),
max_value = values(max_value),
min_value = values(min_value)
    </insert>

    <!--通过主键修改数据-->
    <update id="update">
        update select_limit_info
        <set>
            <if test="columnKey != null">
                column_key = #{columnKey},
            </if>
            <if test="maxValue != null">
                max_value = #{maxValue},
            </if>
            <if test="minValue != null">
                min_value = #{minValue},
            </if>
        </set>
        where limit_id = #{limitId}
    </update>

    <!--通过主键删除-->
    <delete id="deleteById">
        delete from select_limit_info where limit_id = #{limitId}
    </delete>

</mapper>

